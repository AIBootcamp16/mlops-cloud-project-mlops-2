
# ğŸ§ ì‚¬ìš©ì ì„ í˜¸ë„ ê¸°ë°˜ ìŒì•… ì¶”ì²œ ì‹œìŠ¤í…œ

<br>
## ğŸ’» í”„ë¡œì íŠ¸ ì†Œê°œ
### ğŸµ Seed-based Music Recommendation System

ì‚¬ìš©ìê°€ **ê²€ìƒ‰ìœ¼ë¡œ ë…¸ë˜ 5ê³¡ì„ ì„ íƒ**í•˜ë©´, í•´ë‹¹ ê³¡ë“¤ì˜ **ì˜¤ë””ì˜¤ íŠ¹ì„±(Audio Features)**ì„ ê¸°ë°˜ìœ¼ë¡œ  
ì½˜í…ì¸  ê¸°ë°˜ ì¶”ì²œ(Content-based Filtering)ì„ ìˆ˜í–‰í•˜ì—¬ **ë§ì¶¤í˜• ì¶”ì²œ ë¦¬ìŠ¤íŠ¸**ë¥¼ ì œê³µí•©ë‹ˆë‹¤.  

Spotify APIë¥¼ í™œìš©í•˜ì—¬ **ê²€ìƒ‰ / ë©”íƒ€ë°ì´í„° / ì˜¤ë””ì˜¤ íŠ¹ì„±**ì„ ê°€ì ¸ì˜¤ë©°,  
ì¶”ì²œ ì•Œê³ ë¦¬ì¦˜ì€ **ì½”ì‚¬ì¸ ìœ ì‚¬ë„(Cosine Similarity)**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.  

<br>

## âœ¨ Features
- ğŸ” **ê²€ìƒ‰(Search)**: Spotify APIë¥¼ í†µí•œ íŠ¸ë™ ê²€ìƒ‰  
- ğŸ¶ **Seed Selection**: ì‚¬ìš©ìê°€ ì¢‹ì•„í•˜ëŠ” ë…¸ë˜ 5ê³¡ ì„ íƒ  
- ğŸ§© **í”„ë¡œí•„ ë²¡í„° ìƒì„±**: ì„ íƒí•œ ê³¡ì˜ ì˜¤ë””ì˜¤ íŠ¹ì„±ì„ í‰ê· í™”í•˜ì—¬ ì‚¬ìš©ì í”„ë¡œí•„ êµ¬ì„±  
- ğŸ“Š **ì¶”ì²œ ë¦¬ìŠ¤íŠ¸ ìƒì„±**: ì½”ì‚¬ì¸ ìœ ì‚¬ë„ë¡œ í›„ë³´ ì¹´íƒˆë¡œê·¸ì™€ ë¹„êµí•˜ì—¬ Top-K ì¶”ì²œ  
- ğŸ§ **UI ì œê³µ**: Streamlitìœ¼ë¡œ ê°„ë‹¨í•œ ì›¹ UI  
- âš™ï¸ **API ì œê³µ**: FastAPI ê¸°ë°˜ ì¶”ì²œ API  
- ğŸ§  **MLOps í†µí•©**: Airflow + MLflowë¥¼ í†µí•œ íŒŒì´í”„ë¼ì¸ ë° ëª¨ë¸ ê´€ë¦¬  
- ğŸ³ **Docker ì§€ì›**: ì „ì²´ ì‹œìŠ¤í…œì„ Docker Composeë¡œ í†µí•© ì‹¤í–‰ ê°€ëŠ¥  

<br>

## ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦ íŒ€ êµ¬ì„±ì›

| ![ê¹€ì†Œì€](https://avatars.githubusercontent.com/u/156163982?v=4) | ![ê¹€ì¬ë¡](https://avatars.githubusercontent.com/u/156163982?v=4) | ![ê¹€ì¢…í™”](https://avatars.githubusercontent.com/u/156163982?v=4) | ![ìµœë³´ê²½](https://avatars.githubusercontent.com/u/156163982?v=4) | ![í™©ì€í˜œ](https://avatars.githubusercontent.com/u/156163982?v=4) |
| :--------------------------------------------------------------: | :--------------------------------------------------------------: | :--------------------------------------------------------------: | :--------------------------------------------------------------: | :--------------------------------------------------------------: |
| [ê¹€ì†Œì€](https://github.com/oriori88) | [ê¹€ì¬ë¡](https://github.com/UpstageAILab) | [ê¹€ì¢…í™”](https://github.com/UpstageAILab) | [ìµœë³´ê²½](https://github.com/UpstageAILab) | [í™©ì€í˜œ](https://github.com/UpstageAILab) |
| íŒ€ì¥, ë‹´ë‹¹ ì—­í•  | ë‹´ë‹¹ ì—­í•  | ë‹´ë‹¹ ì—­í•  | ë‹´ë‹¹ ì—­í•  | ë‹´ë‹¹ ì—­í•  |

<br>

## ğŸ”¨ ê°œë°œ í™˜ê²½ ë° ê¸°ìˆ  ìŠ¤íƒ
- **ì–¸ì–´**: Python 3.10  
- **ì›¹ í”„ë ˆì„ì›Œí¬**: FastAPI, Streamlit  
- **MLOps ë„êµ¬**: MLflow, Airflow  
- **ML ë¼ì´ë¸ŒëŸ¬ë¦¬**: LightGBM, FAISS  
- **ë°ì´í„° ì²˜ë¦¬**: Pandas, Spotipy  
- **í™˜ê²½ ê´€ë¦¬**: Docker, Docker Compose  
- **ë²„ì „ ê´€ë¦¬**: Git, GitHub  

<br>

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°
```
mlops-cloud-project-mlops-2/
â”œâ”€â”€ dataset/
â”‚ â”œâ”€ raw/ # Spotify ì›ë³¸ ë°ì´í„° (Git ì—…ë¡œë“œ ì œì™¸)
â”‚ â””â”€ processed/ # ì „ì²˜ë¦¬ëœ ë°ì´í„° (ë¡œì»¬ ìœ ì§€)
â”‚
â”œâ”€â”€ models/ # í•™ìŠµëœ ëª¨ë¸ ë° Finder ì•„í‹°íŒ©íŠ¸
â”‚
â”œâ”€â”€ src/ # ì• í”Œë¦¬ì¼€ì´ì…˜ ì£¼ìš” ì½”ë“œ
â”‚ â”œâ”€ main.py # FastAPI ì„œë²„ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚ â”œâ”€ api/api.py # API ë¼ìš°íŒ… ë° ì—”ë“œí¬ì¸íŠ¸ ì •ì˜
â”‚ â”œâ”€ web/streamlit_app.py # Streamlit UI ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚ â”œâ”€ model/ # ì¶”ì²œ ëª¨ë¸ (FAISS, LightGBM ë“±)
â”‚ â”œâ”€ data/build_dataset.py # ë°ì´í„° ì „ì²˜ë¦¬ ë° íŒŒì´í”„ë¼ì¸
â”‚ â”œâ”€ utils/ # ê³µìš© ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚ â””â”€ tests/ # í…ŒìŠ¤íŠ¸ ì½”ë“œ
â”‚
â”œâ”€â”€ dags/ # Airflow DAG ì •ì˜ (ì›Œí¬í”Œë¡œ ê´€ë¦¬)
â”œâ”€â”€ tmp/ # ì„ì‹œ ë””ë ‰í† ë¦¬ (Airflow/MLflow ìºì‹œ)
â”‚
â”œâ”€â”€ Dockerfile.api # ğŸµ FastAPI (Backend) ë¹Œë“œìš©
â”œâ”€â”€ Dockerfile.ui # ğŸ–¥ï¸ Streamlit (Frontend) ë¹Œë“œìš©
â”œâ”€â”€ Dockerfile.airflow # â˜ï¸ Airflow ì»¨í…Œì´ë„ˆ ë¹Œë“œìš©
â”œâ”€â”€ Dockerfile.mlflow # ğŸ§ª MLflow Tracking Server ë¹Œë“œìš©
â”‚
â”œâ”€â”€ docker-compose.yml # ì „ì²´ ì„œë¹„ìŠ¤ í†µí•© ì‹¤í–‰ ì„¤ì •
â”‚
â”œâ”€â”€ .github/
â”‚ â””â”€ workflows/
â”‚ â”œâ”€ ci-cd.yml # main ë¸Œëœì¹˜ìš© CI (í…ŒìŠ¤íŠ¸ ë¹Œë“œ)
â”‚ â””â”€ build.yml # íƒœê·¸ ê¸°ë°˜ CD (ë°°í¬ ë¹Œë“œ)
â”‚
â”œâ”€â”€ docs/
â”‚ â””â”€ ci-cd-setup.md # CI/CD ìƒì„¸ ì„¤ì • ê°€ì´ë“œ (README ë¶€ë¡ ë²„ì „)
â”‚
â”œâ”€â”€ .env # ë¡œì»¬ í™˜ê²½ ë³€ìˆ˜ (Git ë¯¸í¬í•¨)
â”œâ”€â”€ .env.safe # Spotify ì¸ì¦ ì—†ì´ ì‹¤í–‰ìš©
â”œâ”€â”€ .env.template # Spotify API ì¸ì¦ í…œí”Œë¦¿
â”‚
â”œâ”€â”€ requirements_api.txt # FastAPI ì˜ì¡´ì„±
â”œâ”€â”€ requirements_ui.txt # Streamlit ì˜ì¡´ì„±
â”‚
â”œâ”€â”€ .dockerignore # Docker ë¹Œë“œ ì œì™¸ ê·œì¹™
â”œâ”€â”€ .gitignore # Git ì œì™¸ ê·œì¹™
â””â”€â”€ README.md # ğŸ“˜ í”„ë¡œì íŠ¸ ë¬¸ì„œ (í˜„ì¬ íŒŒì¼)

ğŸ’¡ AirflowëŠ” Dockerfile.airflow ë‚´ë¶€ì—ì„œ ì˜ì¡´ì„±ì„ ì§ì ‘ ì„¤ì¹˜í•©ë‹ˆë‹¤.
CI/CD íŒŒì´í”„ë¼ì¸ ì„¤ì •ì€ .github/workflows ë””ë ‰í† ë¦¬ì—ì„œ ê´€ë¦¬ë©ë‹ˆë‹¤.
```

<br>

## ğŸ’» êµ¬í˜„ ê¸°ëŠ¥
### ê¸°ëŠ¥1
- FastAPI ì„œë²„: `/search`, `/recommend_ranked` ì—”ë“œí¬ì¸íŠ¸ ì œê³µ  
### ê¸°ëŠ¥2
- Streamlit UI: ì‹¤ì‹œê°„ ê²€ìƒ‰ ë° ì¶”ì²œ ê²°ê³¼ ì‹œê°í™”  
### ê¸°ëŠ¥3
- MLflow / Airflow í†µí•©ìœ¼ë¡œ íŒŒì´í”„ë¼ì¸ ë° ì‹¤í—˜ ê´€ë¦¬  

<br>

## ğŸ› ï¸ ì‘í’ˆ ì•„í‚¤í…ì²˜ (Architecture)
- #### _ì•„ë˜ ì´ë¯¸ì§€ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤_

![ì´ë¯¸ì§€ ì„¤ëª…](https://miro.medium.com/v2/resize:fit:4800/format:webp/1*ub_u88a4MB5Uj-9Eb60VNA.jpeg)

**êµ¬ì„±ìš”ì†Œ**
- **FastAPI (Backend)**: ì¶”ì²œ ë¡œì§ ë° ë°ì´í„° API  
- **Streamlit (Frontend)**: ì‚¬ìš©ì ì¸í„°í˜ì´ìŠ¤  
- **Airflow**: ë°ì´í„° ìˆ˜ì§‘ ë° ì „ì²˜ë¦¬ ì›Œí¬í”Œë¡œ ê´€ë¦¬  
- **MLflow**: ì‹¤í—˜ ì¶”ì  ë° ëª¨ë¸ ë²„ì „ ê´€ë¦¬  
- **Docker Compose**: ì „ì²´ í™˜ê²½ í†µí•© ë° ì‹¤í–‰  

<br>

## ğŸš€ ì‹¤í–‰ ë°©ë²•

## 1ï¸âƒ£ í™˜ê²½ ë³€ìˆ˜ ì„¤ì •  

Spotify ì¸ì¦ ì—†ì´ ì‹¤í–‰í•˜ë ¤ë©´:

- cp .env.safe .env 
- `.env.safe`ë¥¼ `.env`ë¡œ ë³µì‚¬ ì‹œ **Spotify ì¸ì¦ ì—†ì´ ì„œë²„ ë¶€íŒ… ê°€ëŠ¥**

Spotify APIë¥¼ ì‚¬ìš©í•˜ë ¤ë©´:

- cp .env.template .env
- ì‹¤ì œ Spotify API ì‚¬ìš© ì‹œ `.env.template`ì˜ Client ID/Secret ì¶”ê°€

## 2ï¸âƒ£ FastAPI ì„œë²„ ì‹¤í–‰

- docker build -t music_api -f Dockerfile .
- docker run -p 8000:8000 music_api

## 3ï¸âƒ£ Streamlit UI ì‹¤í–‰

- docker build -t music_ui -f Dockerfile.ui .
- docker run -p 8501:8501 music_ui

## 4ï¸âƒ£ ì „ì²´ ì„œë¹„ìŠ¤ í†µí•© ì‹¤í–‰

- docker compose up -d --build
- FastAPI, Streamlit, Airflow, MLflow ì»¨í…Œì´ë„ˆê°€ í•¨ê»˜ êµ¬ë™ë©ë‹ˆë‹¤.

<br>

### âš™ï¸ ë¹Œë“œ ìµœì í™”
3ë‹¨ê³„ ë¹Œë“œ ì „ëµ (builder â†’ artifact â†’ runtime)

- dataset/*.csv ì œì™¸ë¡œ ë¹Œë“œ ì‹œê°„ ë‹¨ì¶•

- requirements_* ìºì‹œ ê³ ì •ìœ¼ë¡œ 3ë¶„ â†’ 10ì´ˆ

- API/UI ë¶„ë¦¬ë¡œ ì»¨í…Œì´ë„ˆ íš¨ìœ¨ í–¥ìƒ

<br>

### ğŸš¨ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
1. Spotify API ì¸ì¦ ì‹¤íŒ¨
    - .envì— Client ID / Secret ëˆ„ë½ ì‹œ ë°œìƒ
    - í•´ê²° :
      SPOTIPY_CLIENT_ID=<your_id>
      SPOTIPY_CLIENT_SECRET=<your_secret>
2. FastAPI ì„œë²„ ë¶€íŒ… ì‹¤íŒ¨
    - spotify_data_clean.csv ë¯¸ì¡´ì¬ ì‹œ ë°œìƒ
    - í•´ê²° :
      dataset/processed/spotify_data_clean.csv ì¶”ê°€ í›„ ì¬ë¹Œë“œ
3. Docker ë¹Œë“œ ì§€ì—°
    - ìºì‹œ ë¯¸ì‚¬ìš© ë˜ëŠ” dataset ë³µì‚¬ í¬í•¨
    - í•´ê²° :
      docker compose build --no-cache
      
<br>

### ğŸ“Œ í”„ë¡œì íŠ¸ íšŒê³ 

- Docker ê¸°ë°˜ í†µí•© í™˜ê²½ìœ¼ë¡œ ì‹¤í–‰ ì•ˆì •ì„± í™•ë³´
- ë¹Œë“œ ìºì‹œ ìµœì í™”ë¡œ ê°œë°œ íš¨ìœ¨ í–¥ìƒ
- Airflow / MLflow ì—°ë™ìœ¼ë¡œ MLOps ìë™í™” ê¸°ë°˜ ë§ˆë ¨

<br>

### ğŸ“° ì°¸ê³ ìë£Œ
- Spotify Web API Documentation
- FastAPI Official Docs
- Streamlit Docs
- MLflow Docs
- Apache Airflow Docs

 
---

## âš™ï¸ CI/CD í™˜ê²½ ì„¤ì • ê°€ì´ë“œ (GitHub Actions)

ì´ í”„ë¡œì íŠ¸ëŠ” GitHub Actionsë¥¼ í†µí•´ ìë™ìœ¼ë¡œ ë¹Œë“œ ë° ë°°í¬ë©ë‹ˆë‹¤.  
Secretsë¥¼ ë“±ë¡í•˜ë©´ main ë¸Œëœì¹˜ Push ì‹œì—ëŠ” **CI(í…ŒìŠ¤íŠ¸ ë¹Œë“œ)**,  
ë²„ì „ íƒœê·¸ Push ì‹œì—ëŠ” **CD(ë°°í¬ ë¹Œë“œ)** ê°€ ìë™ ì‹¤í–‰ë©ë‹ˆë‹¤.

### ğŸ” ë“±ë¡í•´ì•¼ í•  Secrets
| ì´ë¦„ | ì„¤ëª… |
|------|------|
| `SPOTIPY_CLIENT_ID` | Spotify API Client ID |
| `SPOTIPY_CLIENT_SECRET` | Spotify API Secret |
| `AWS_ACCESS_KEY_ID` | MinIO ë˜ëŠ” S3 Access Key |
| `AWS_SECRET_ACCESS_KEY` | MinIO ë˜ëŠ” S3 Secret Key |
| `MLFLOW_ADDR` | MLflow Tracking ì„œë²„ ì£¼ì†Œ |

> `.env` íŒŒì¼ì€ Gitì— í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.  
> CI/CD ì‹¤í–‰ ì¤‘ì— ì´ Secrets ê°’ì´ ìë™ìœ¼ë¡œ `.env`ë¡œ ì£¼ì…ë©ë‹ˆë‹¤.

### ğŸš€ ì‹¤í–‰ íŠ¸ë¦¬ê±°
| íŠ¸ë¦¬ê±° | ë™ì‘ |
|--------|------|
| `push â†’ main` | FastAPI / Streamlit ë¹Œë“œ ë° í—¬ìŠ¤ì²´í¬ (CI) |
| `push â†’ tag (v1.0.0-stable ë“±)` | Docker ì´ë¯¸ì§€ ë¹Œë“œ ë° GHCR ë°°í¬ (CD) |

```bash
# ì˜ˆì‹œ
git push origin main          # CI ìë™ ì‹¤í–‰
git tag v1.0.0-stable
git push origin v1.0.0-stable # CD ìë™ ì‹¤í–‰



