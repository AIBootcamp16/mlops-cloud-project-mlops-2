version: "3.9"

services:
  airflow:
    build: .
    container_name: airflow
    env_file:
      - .env
    ports:
      - "8080:8080"           # Airflow 웹서버 포트
    volumes:
      - ./dags:/usr/local/airflow/dags    # DAG 코드 동기화
      - ./logs:/usr/local/airflow/logs    # 로그 저장
      - ./src:/app/src                    # 학습/전처리 코드
    environment:
      - AIRFLOW_HOME=/usr/local/airflow
      - EC2_HOST=${EC2_HOST}
    working_dir: /usr/local/airflow
